{"version":3,"sources":["../src/node-stream.js"],"names":["fromStream","stream","dataEventName","finishEventName","pause","Observable","create","observer","dataHandler","data","next","errorHandler","err","error","endHandler","removeListener","complete","addListener","resume","fromReadStream","path","fs","createReadStream"],"mappings":";;;;;;;AAAA;;AAEA;;;;AAEO,MAAMA,aAAa,UAAUC,MAAV,EAAkBC,gBAAgB,MAAlC,EAA0CC,kBAAkB,KAA5D,EAAmE;AAC5FF,SAAOG,KAAP;AAEA,SAAOC,iBAAWC,MAAX,CAAkB,UAAUC,QAAV,EAAoB;AAC5C,aAASC,WAAT,CAAsBC,IAAtB,EAA4B;AAC3BF,eAASG,IAAT,CAAcD,IAAd;AACA;;AAED,aAASE,YAAT,CAAuBC,GAAvB,EAA4B;AAC3BL,eAASM,KAAT,CAAeD,GAAf;AACA;;AAED,aAASE,UAAT,GAAuB;AACtBb,aAAOc,cAAP,CAAsBb,aAAtB,EAAqCM,WAArC;AACAP,aAAOc,cAAP,CAAsB,OAAtB,EAA+BJ,YAA/B;AACAV,aAAOc,cAAP,CAAsBZ,eAAtB,EAAuCW,UAAvC;AACAP,eAASS,QAAT;AACA;;AAEDf,WAAOgB,WAAP,CAAmBf,aAAnB,EAAkCM,WAAlC;AACAP,WAAOgB,WAAP,CAAmB,OAAnB,EAA4BN,YAA5B;AACAV,WAAOgB,WAAP,CAAmBd,eAAnB,EAAoCW,UAApC;AAEAb,WAAOiB,MAAP;AAGA,GAvBM,CAAP;AAwBA,CA3BM;;;;AA6BA,MAAMC,iBAAiBC,QAAQpB,WAAWqB,GAAGC,gBAAH,CAAoBF,IAApB,CAAX,CAA/B","sourcesContent":["import * as fs from \"fs\";\r\n\r\nimport { Observable } from \"rxjs\";\r\n\r\nexport const fromStream = function (stream, dataEventName = \"data\", finishEventName = \"end\") {\r\n\tstream.pause();\r\n\r\n\treturn Observable.create(function (observer) {\r\n\t\tfunction dataHandler (data) {\r\n\t\t\tobserver.next(data);\r\n\t\t}\r\n\r\n\t\tfunction errorHandler (err) {\r\n\t\t\tobserver.error(err);\r\n\t\t}\r\n\r\n\t\tfunction endHandler () {\r\n\t\t\tstream.removeListener(dataEventName, dataHandler);\r\n\t\t\tstream.removeListener(\"error\", errorHandler);\r\n\t\t\tstream.removeListener(finishEventName, endHandler);\r\n\t\t\tobserver.complete();\r\n\t\t}\r\n\r\n\t\tstream.addListener(dataEventName, dataHandler);\r\n\t\tstream.addListener(\"error\", errorHandler);\r\n\t\tstream.addListener(finishEventName, endHandler);\r\n\r\n\t\tstream.resume();\r\n\r\n\r\n\t});\r\n};\r\n\r\nexport const fromReadStream = path => fromStream(fs.createReadStream(path));\r\n"],"file":"node-stream.js"}