{"version":3,"sources":["../src/rich-reducers.js"],"names":["reduce","arr","fn","seed","at","l","arguments","length","isIterable","Symbol","iterator","next","value","done","obj","reduceAhead","nextSeed","tmp","out","init","entry","call","reduceAround","lastSeed","last"],"mappings":"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","sourcesContent":["export function reduce(arr,fn,seed,at = 0) {\r\n\tconst l = arguments.length;\r\n\tif(isIterable(arr)) arr = arr[Symbol.iterator]();\r\n\tlet next = {};\r\n\tif(l < 3) {\r\n\t\tnext = arr.next();\r\n\t\tseed = next.value;\r\n\t\tat = 1;\r\n\t}\r\n\twhile(next = arr.next(),!next.done) {\r\n\t\tseed = fn(seed,next.value,at++);\r\n\t}\r\n\treturn seed;\r\n}\r\n\r\nfunction isIterable(obj) {\r\n\t// checks for null and undefined\r\n\tif (obj == null) {\r\n\t\treturn false;\r\n\t}\r\n\treturn typeof obj[Symbol.iterator] === \"function\";\r\n}\r\n\r\nexport function reduceAhead(arr,fn,seed,nextSeed) {\r\n\tconst l = arguments.length;\r\n\tif(isIterable(arr)) arr = arr[Symbol.iterator]();\r\n\tseed = l < 3 ? arr.next().value : seed;\r\n\tlet tmp = {\r\n\t\tout:seed,\r\n\t\tinit:false,\r\n\t\tat: l < 3 ? 1 : 0\r\n\t};\r\n\t// call one 'before' to set entry\r\n\ttmp = reduce(arr,function(tmp,next){\r\n\t\tif(!tmp.init) {\r\n\t\t\ttmp.entry = next;\r\n\t\t\ttmp.init = true;\r\n\t\t\treturn tmp;\r\n\t\t}\r\n\t\ttmp.out = fn.call(arr,tmp.out,tmp.entry,next,tmp.at);\r\n\t\ttmp.entry = next;\r\n\t\ttmp.at = tmp.at + 1;\r\n\t\treturn tmp;\r\n\t},tmp);\r\n\treturn !tmp.init ? tmp.out : fn.call(arr,tmp.out,tmp.entry,nextSeed,tmp.at);\r\n}\r\n\r\n\r\nexport function reduceAround(arr,fn,seed,lastSeed,nextSeed) {\r\n\tconst l = arguments.length;\r\n\tif(isIterable(arr)) arr = arr[Symbol.iterator]();\r\n\tseed = l < 3 ? arr.next().value : seed;\r\n\tlet tmp = {\r\n\t\tout:seed,\r\n\t\tinit:false,\r\n\t\tlast:lastSeed,\r\n\t\tat: l < 3 ? 1 : 0\r\n\t};\r\n\t// call one 'before' to set entry\r\n\ttmp = reduce(arr,function(tmp,next){\r\n\t\tif(!tmp.init) {\r\n\t\t\ttmp.entry = next;\r\n\t\t\ttmp.init = true;\r\n\t\t\treturn tmp;\r\n\t\t}\r\n\t\ttmp.out = fn.call(arr,tmp.out,tmp.entry,tmp.last,next,tmp.at);\r\n\t\ttmp.last = tmp.entry;\r\n\t\ttmp.entry = next;\r\n\t\ttmp.at = tmp.at + 1;\r\n\t\treturn tmp;\r\n\t},tmp);\r\n\treturn !tmp.init ? tmp.out : fn.call(arr,tmp.out,tmp.entry,tmp.last,nextSeed,tmp.at);\r\n}\r\n"],"file":"rich-reducers.js"}